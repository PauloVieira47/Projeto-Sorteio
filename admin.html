<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sorteio • Admin</title>
  <meta name="color-scheme" content="light dark">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/admin.css">
</head>
<body>
  <div class="wrapper">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">SC</div>
        <span>Admin do Sorteio</span>
      </div>
      <button class="logout" id="btnLogout">Sair</button>
    </header>

    <!-- LOGIN -->
    <section class="login" id="loginView">
      <div class="box">
        <h1 class="title">Acesse sua conta</h1>
        <p class="subtitle">Use o e-mail e senha definidos para o evento.</p>
        <div class="field">
          <label for="email">E-mail</label>
          <input id="email" class="input" type="email" placeholder="admin@demo.com" autocomplete="username">
        </div>
        <div class="field">
          <label for="password">Senha</label>
          <input id="password" class="input" type="password" placeholder="••••••••" autocomplete="current-password">
        </div>
        <button class="btn" id="btnLogin">Entrar</button>
        <div class="helper">Demo: <strong>admin@demo.com</strong> / <strong>123456</strong></div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <main>
      <section class="card" id="dashView" style="display:none">
        <div class="tabs">
          <button class="active" data-tab="inscritos">Inscritos</button>
          <button data-tab="sorteio">Sorteio</button>
          <button data-tab="config">Configurações</button>
        </div>

        <!-- Inscritos -->
        <div class="panel active" id="panel-inscritos">
          <div class="toolbar">
            <div class="metrics">
              <div class="metric"><small>Total de inscritos</small><strong id="mTotal">0</strong></div>
              <div class="metric"><small>Último nº gerado</small><strong id="mLast">#0000</strong></div>
            </div>
            <div class="search">
              <input id="search" class="input" placeholder="Buscar por nome, e-mail ou telefone"/>
              <button class="btn btn-secondary" id="btnExport">Exportar CSV</button>
            </div>
          </div>

          <div id="empty" class="empty" style="display:none">Nenhum inscrito por enquanto.</div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr><th>Nº</th><th>Nome</th><th>E-mail</th><th>Telefone</th><th>Data</th></tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>
        </div>

        <!-- Sorteio -->
        <div class="panel" id="panel-sorteio">
          <div class="toolbar">
            <div class="metrics">
              <div class="metric"><small>Elegíveis</small><strong id="mElig">0</strong></div>
              <div class="metric"><small>Último sorteio</small><strong id="mDrawAt">—</strong></div>
            </div>
            <div class="row right">
              <button class="btn btn-ghost" id="btnTelao">Abrir Telão</button>
              <button class="btn" id="btnSortear">Sortear</button>
            </div>
          </div>
          <p class="hint">Dica: “Abrir Telão” abre <code>tela.html</code> em outra aba. Ao clicar “Sortear”, o telão recebe eventos via <code>BroadcastChannel</code>.</p>
          <div id="drawHistory"></div>
        </div>

        <!-- Config -->
        <div class="panel" id="panel-config">
          <p class="hint">Configurações (apenas visual, sem backend):</p>
          <div class="field" style="max-width:420px">
            <label for="slug">Slug do evento</label>
            <input id="slug" class="input" placeholder="ex.: palestra-xyz" />
          </div>
          <div class="field" style="max-width:420px">
            <label for="title">Título</label>
            <input id="title" class="input" placeholder="Título do evento" />
          </div>
          <button class="btn" id="btnSaveCfg">Salvar (demo)</button>
        </div>

      </section>
    </main>
  </div>

  <!-- Modal Resultado -->
  <div class="modal" id="modal">
    <div class="box">
      <div class="badge" aria-hidden="true">✓</div>
      <h2 class="title">Vencedor sorteado</h2>
      <p class="subtitle">Resultado do sorteio atual</p>
      <div class="winner">
        <small>Número</small>
        <div class="num" id="wNum">#0000</div>
        <small>Nome</small>
        <strong id="wName">—</strong>
      </div>
      <div class="row">
        <button class="btn btn-ghost" id="btnFechar">Fechar</button>
        <button class="btn" id="btnRevelar">Revelar no Telão</button>
      </div>
    </div>
  </div>

 <script src="js/admin.js"></script>
</body>
</html>
